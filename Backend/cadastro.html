<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cadastro | ColorGlass</title>
<meta name="description" content="Cadastro de usuários ColorGlass.">
<style>
:root {
    --cg-blue: #1079ba;
    --cg-blue-dark: #0d5d8c;
    --cg-blue-soft: #e7f3fb;
    --cg-gold: #f0c24c;
    --cg-white: #ffffff;
    --cg-text: #1f2933;
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; }
body {
    background: radial-gradient(circle at top, rgba(16,121,186,0.15), transparent 55%),
        linear-gradient(135deg, #f5fbff 0%, #eef4f9 45%, #f8fbff 100%);
    color: var(--cg-text);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 32px 20px;
}

.page {
    width: min(1100px, 100%);
    display: flex;
    flex-direction: column;
    gap: 24px;
    animation: fadeIn 0.9s ease;
}

.brand {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 20px 24px;
    background: var(--cg-white);
    border-radius: 18px;
    box-shadow: 0 10px 30px rgba(15, 44, 62, 0.12);
    position: relative;
    overflow: hidden;
}

.brand::after {
    content: "";
    position: absolute;
    right: -80px;
    top: -120px;
    width: 240px;
    height: 240px;
    background: radial-gradient(circle, rgba(16,121,186,0.25), transparent 60%);
}

.logo-mark {
    width: 52px;
    height: 52px;
    border-radius: 14px;
    background: var(--cg-white);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    box-shadow: 0 8px 18px rgba(16, 121, 186, 0.35);
}

.logo-mark img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
}

.brand h1 {
    font-size: 1.6rem;
    color: var(--cg-blue-dark);
}

.brand span {
    color: var(--cg-blue);
    font-weight: 600;
}

.brand p {
    margin-top: 4px;
    color: #4b5563;
    font-size: 0.95rem;
}

.container {
    width: 100%;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
}

.card {
    background: var(--cg-white);
    border-radius: 18px;
    padding: 28px;
    box-shadow: 0 12px 30px rgba(15, 44, 62, 0.12);
    border: 1px solid rgba(16, 121, 186, 0.08);
    position: relative;
    overflow: hidden;
    animation: floatIn 0.8s ease;
}

.card::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg, rgba(16,121,186,0.08), transparent 55%);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
}

.card:hover::before {
    opacity: 1;
}

.card h2 {
    color: var(--cg-blue);
    margin-bottom: 12px;
    font-size: 1.3rem;
}

label {
    font-size: 0.95rem;
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-bottom: 12px;
    color: #374151;
}

input {
    padding: 12px 14px;
    border-radius: 10px;
    border: 1px solid #d4d9df;
    font-size: 0.95rem;
    transition: border 0.2s ease, box-shadow 0.2s ease;
    background: #fdfefe;
}

input:focus {
    outline: none;
    border-color: var(--cg-blue);
    box-shadow: 0 0 0 3px rgba(16,121,186,0.15);
}

.btn {
    background: linear-gradient(135deg, var(--cg-blue), var(--cg-blue-dark));
    color: #fff;
    border: none;
    border-radius: 12px;
    padding: 12px;
    font-weight: 600;
    cursor: pointer;
    width: 100%;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 0 8px 16px rgba(16, 121, 186, 0.25);
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 22px rgba(16, 121, 186, 0.28);
}

.btn:active {
    transform: translateY(0);
}

.status {
    margin-top: 10px;
    font-size: 0.9rem;
    color: #555;
    min-height: 20px;
}

.status.ok { color: #0c7c3c; }
.status.erro { color: #c23616; }

.hint {
    font-size: 0.85rem;
    color: #6b7280;
    line-height: 1.4;
    margin-top: 8px;
}

.hint a {
    color: var(--cg-blue);
    font-weight: 600;
    text-decoration: none;
}

.hint a:hover {
    text-decoration: underline;
}

.pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: var(--cg-blue-soft);
    color: var(--cg-blue-dark);
    padding: 6px 12px;
    border-radius: 999px;
    font-size: 0.85rem;
    margin-bottom: 16px;
}

.pill span {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: var(--cg-gold);
    box-shadow: 0 0 8px rgba(240, 194, 76, 0.6);
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes floatIn {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
}

@media (max-width: 680px) {
    .brand { flex-direction: column; align-items: flex-start; }
    .brand h1 { font-size: 1.4rem; }
}
</style>
</head>
<body>
<div class="page">
    <header class="brand">
        <div class="logo-mark">
            <img src="logo.jpg" alt="Logo ColorGlass">
        </div>
        <div>
            <h1>ColorGlass <span>Portal de Acesso</span></h1>
            <p>Bem-vindo(a) ao ambiente oficial da ColorGlass. Gerencie seus orçamentos com segurança.</p>
        </div>
    </header>

    <div class="container">
        <div class="card">
            <div class="pill"><span></span>Novo por aqui?</div>
            <h2>Cadastro</h2>
            <label>Usuário
                <input type="text" id="cadastroUser" placeholder="Digite seu usuário">
            </label>
            <label>Senha
                <input type="password" id="cadastroPass" placeholder="Digite sua senha">
            </label>
            <button class="btn" onclick="cadastrar()">Cadastrar</button>
            <div id="cadastroStatus" class="status"></div>
            <p class="hint">Após o cadastro, aguarde o admin aprovar seu usuário (token no Supabase).</p>
            <p class="hint">Já tem acesso? <a href="login.html">Entrar na conta</a>.</p>
        </div>
    </div>
</div>

<script>
const API_BASE = "https://colorglass.onrender.com";

function setStatus(elementId, message, tipo) {
    const el = document.getElementById(elementId);
    el.textContent = message;
    el.classList.remove("ok", "erro");
    if (tipo) el.classList.add(tipo);
}

async function cadastrar() {
    const user = document.getElementById("cadastroUser").value.trim();
    const pass = document.getElementById("cadastroPass").value.trim();
    if (!user || !pass) {
        setStatus("cadastroStatus", "Preencha usuário e senha.", "erro");
        return;
    }

    try {
        setStatus("cadastroStatus", "Cadastrando...");
        const res = await fetch(`${API_BASE}/api/usuarios/cadastro`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ user, pass })
        });
        const data = await res.json();

        if (!data.success) {
            setStatus("cadastroStatus", data.error || "Erro ao cadastrar.", "erro");
            return;
        }

        setStatus("cadastroStatus", data.message || "Cadastro realizado.", "ok");
        document.getElementById("cadastroUser").value = "";
        document.getElementById("cadastroPass").value = "";
    } catch (err) {
        console.error(err);
        setStatus("cadastroStatus", "Erro ao cadastrar. Verifique o console.", "erro");
    }
}
</script>
</body>
</html>
