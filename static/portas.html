<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portas de Vidro e Alum√≠nio em Fortaleza | ColorGlass</title>
<meta name="description" content="Portas de vidro e alum√≠nio sob medida em Fortaleza. Or√ßamento r√°pido, qualidade premium e instala√ß√£o profissional.">
<meta name="robots" content="index, follow">

<!-- SEO LOCAL -->
<meta name="geo.region" content="BR-CE">
<meta name="geo.placename" content="Fortaleza">
<meta name="geo.position" content="-3.7319;-38.5267">
<meta name="ICBM" content="-3.7319, -38.5267">

<!-- CANONICAL -->
<link rel="canonical" href="https://www.colorglassfortaleza.com.br/">

<!-- OPEN GRAPH -->
<meta property="og:title" content="Portas de Vidro e Alum√≠nio em Fortaleza | ColorGlass">
<meta property="og:description" content="Or√ßamento r√°pido em portas de vidro e alum√≠nio sob medida em Fortaleza. Qualidade premium e instala√ß√£o profissional.">
<meta property="og:url" content="https://www.colorglassfortaleza.com.br/">
<meta property="og:type" content="website">

<style>
/* =========================
   EST√âTICA NOVA (login/aprovacao-like)
   ‚ö†Ô∏è N√ÉO MEXE EM MEC√ÇNICA
   ========================= */

:root {
  --cg-blue: #1079ba;
  --cg-blue-dark: #0d5d8c;
  --cg-blue-soft: #e7f3fb;
  --cg-gold: #f0c24c;
  --cg-white: #ffffff;
  --cg-text: #1f2933;
  --cg-muted: #6b7280;
  --cg-border: rgba(16, 121, 186, 0.12);
  --cg-shadow: 0 12px 30px rgba(15, 44, 62, 0.12);
  --cg-shadow-soft: 0 10px 24px rgba(15, 44, 62, 0.10);
}

/* RESET B√ÅSICO */
* { box-sizing: border-box; margin:0; padding:0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }

/* FUNDO padr√£o */
body {
  background:
    radial-gradient(circle at top, rgba(16,121,186,0.15), transparent 55%),
    linear-gradient(135deg, #f5fbff 0%, #eef4f9 45%, #f8fbff 100%);
  color: var(--cg-text);
  min-height: 100vh;
}

/* APP GRID */
.app {
  display: grid;
  grid-template-columns: 240px 1fr;
  min-height: 100vh;
  gap: 18px;
  padding: 18px;
  animation: fadeIn 0.75s ease;
}

/* SIDEBAR (card) */
.sidebar {
  background: linear-gradient(135deg, var(--cg-blue), var(--cg-blue-dark));
  color: #fff;
  padding: 22px 18px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  border-radius: 18px;
  box-shadow: var(--cg-shadow);
  position: sticky;
  top: 18px;
  height: calc(100vh - 36px);
  overflow: hidden;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.sidebar::after{
  content:"";
  position:absolute;
  right:-90px;
  top:-120px;
  width:260px;
  height:260px;
  background: radial-gradient(circle, rgba(255,255,255,0.22), transparent 60%);
  pointer-events:none;
}

.sidebar h3 {
  margin-bottom: 8px;
  font-size: 1.25rem;
  letter-spacing: 0.6px;
  position: relative;
  z-index: 1;
}

.sidebar button {
  padding: 12px 12px;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 12px;
  background: rgba(255,255,255,0.14);
  color: #fff;
  cursor: pointer;
  text-align: left;
  font-weight: 700;
  transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
  position: relative;
  z-index: 1;
}

.sidebar button:hover {
  background: rgba(255,255,255,0.22);
  transform: translateX(4px);
  box-shadow: 0 10px 18px rgba(0,0,0,0.14);
}

/* CONTENT (glass card) */
.content {
  padding: 22px;
  overflow-y: auto;
  border-radius: 18px;
  background: rgba(255,255,255,0.55);
  border: 1px solid rgba(16,121,186,0.10);
  box-shadow: var(--cg-shadow-soft);
  backdrop-filter: blur(10px);
  animation: floatIn 0.65s ease;
}

.content h1 {
  color: var(--cg-blue-dark);
  margin-bottom: 10px;
  font-size: 1.65rem;
}
.content h2{
  color: var(--cg-blue);
  margin-bottom: 10px;
  font-size: 1.15rem;
}

/* Info or√ßamento */
#infoOrcamento{
  background: var(--cg-white);
  border: 1px solid var(--cg-border);
  box-shadow: var(--cg-shadow-soft);
  border-radius: 16px;
  padding: 14px 16px;
  margin-bottom: 14px;
  position: relative;
  overflow: hidden;
}

#infoOrcamento::before{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(120deg, rgba(16,121,186,0.10), transparent 55%);
  opacity: 0.0;
  transition: opacity 0.25s ease;
  pointer-events:none;
}
#infoOrcamento:hover::before{ opacity: 1; }

/* Layout principal */
.door-layout {
  display: grid;
  grid-template-columns: minmax(280px, 460px) 1fr;
  gap: 18px;
  align-items: start;
  margin-top: 10px;
}

/* Cards */
.door-form,
.door-preview,
.section-card{
  background: var(--cg-white);
  border-radius: 18px;
  border: 1px solid var(--cg-border);
  box-shadow: var(--cg-shadow);
  position: relative;
  overflow: hidden;
  animation: cardIn 0.6s ease;
}

.door-form::before,
.door-preview::before,
.section-card::before{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(120deg, rgba(16,121,186,0.08), transparent 55%);
  opacity: 0;
  transition: opacity 0.25s ease;
  pointer-events:none;
}
.door-form:hover::before,
.door-preview:hover::before,
.section-card:hover::before{ opacity: 1; }

.door-form{
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 18px;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
.door-preview{
  padding: 12px;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
.section-card{
  padding: 16px;
  margin-top: 18px;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.door-form:hover,
.door-preview:hover,
.section-card:hover{
  transform: translateY(-2px);
  box-shadow: 0 16px 36px rgba(15,44,62,0.14);
}

/* Inputs */
label { display:flex; flex-direction:column; font-size:0.92rem; gap:7px; color:#374151; }
input, select, textarea{
  padding: 12px 14px;
  font-size: 0.95rem;
  border-radius: 12px;
  border: 1px solid #d4d9df;
  width: 100%;
  background: #fdfefe;
  transition: border .2s ease, box-shadow .2s ease, transform .15s ease;
}
input:focus, select:focus, textarea:focus{
  border-color: var(--cg-blue);
  box-shadow: 0 0 0 3px rgba(16,121,186,0.15);
  outline: none;
}
input:hover, select:hover, textarea:hover{
  transform: translateY(-1px);
}

/* Required highlight (mant√©m l√≥gica existente) */
.required-empty {
  background: #fdeaea !important;
  border-color: #f1b0b0 !important;
}
.required-filled {
  background: #e9f8ee !important;
  border-color: #9fd4b1 !important;
}

/* Bot√µes */
.btn{
  padding: 12px 16px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  background: linear-gradient(135deg, var(--cg-blue), var(--cg-blue-dark));
  color: #fff;
  font-weight: 800;
  transition: transform .2s ease, box-shadow .2s ease, opacity .2s ease;
  box-shadow: 0 10px 18px rgba(16,121,186,0.22);
}
.btn:hover{
  transform: translateY(-2px);
  box-shadow: 0 14px 24px rgba(16,121,186,0.26);
}
.btn:active{ transform: translateY(0); }
.btn-danger{
  background: linear-gradient(135deg, #e84118, #c23616);
  box-shadow: 0 10px 18px rgba(226, 73, 33, 0.20);
}
.btn-danger:hover{
  box-shadow: 0 14px 24px rgba(226, 73, 33, 0.26);
}

/* SVG preview */
#portaSVG{
  width: 100%;
  height: 400px;
  border: 1px solid rgba(16,121,186,0.18);
  background: rgba(255,255,255,0.95);
  border-radius: 14px;
}

/* Price preview */
.price-preview{
  background: linear-gradient(135deg, rgba(16,121,186,0.10), rgba(13,93,140,0.04));
  color: var(--cg-blue-dark);
  font-weight: 800;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(16,121,186,0.14);
}

/* Cost toggle/details */
.cost-toggle{
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 0.92rem;
  color: #374151;
}
cost-details table{
  width: 100%;
  border-collapse: collapse;
  margin-top: 8px;
  overflow: hidden;
  border-radius: 12px;
}
.cost-details th,
.cost-details td{
  border: 1px solid rgba(220,221,225,0.85);
  padding: 8px;
  text-align: left;
}
cost-details th{
  background: rgba(231,243,251,0.9);
}

/* Cards internos */
#portasSalvas div,
#printResumo .print-item,
#printOrdem .print-item{
  margin-bottom: 12px;
  border: 1px solid rgba(16,121,186,0.14);
  padding: 12px;
  background: rgba(255,255,255,0.95);
  border-radius: 14px;
  box-shadow: 0 10px 18px rgba(15,44,62,0.08);
  transition: transform .2s ease, box-shadow .2s ease;
}
#portasSalvas div:hover,
#printResumo .print-item:hover,
#printOrdem .print-item:hover{
  transform: translateY(-2px);
  box-shadow: 0 14px 24px rgba(15,44,62,0.12);
}

#estruturas3DSalvas > div{
  margin-bottom: 10px;
  border: 1px solid rgba(16,121,186,0.14);
  padding: 12px;
  background: rgba(247,249,252,0.95);
  border-radius: 14px;
  box-shadow: 0 10px 18px rgba(15,44,62,0.08);
  transition: transform .2s ease, box-shadow .2s ease;
}
#estruturas3DSalvas > div:hover{
  transform: translateY(-2px);
  box-shadow: 0 14px 24px rgba(15,44,62,0.12);
}

/* Print areas */
.print-area { display: none; }
.print-area.active { display: block; }
.thermal-area { display: none; }
.thermal-area.active { display: block; }
#printResumo svg { display: none; }

/* Ordem produ√ß√£o */
.op-svg { border: 1px solid rgba(16,121,186,0.14); border-radius: 14px; background: #fff; width: 100%; height: auto; margin-top: 10px; }
.op-page { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; align-items: center; margin-bottom: 24px; }
.op-info { font-size: 20px; line-height: 1.6; }
.op-quantity { font-size: 28px; font-weight: 700; fill: var(--cg-blue-dark); }
.op-measure { font-size: 20px; fill: #333; }

/* Etiqueta t√©rmica (mantida) */
.thermal-label {
  width: 100mm;
  height: 150mm;
  padding: 6mm;
  border: 1px solid #333;
  box-sizing: border-box;
  font-size: 12px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 6px;
}
.thermal-header { font-size: 20px; line-height: 1.4; }
.thermal-header strong { font-size: 20px; }
.thermal-divider { border-top: 1px solid #333; margin: 4px 0; }
.thermal-body { font-size: 20px; line-height: 1.4; }
.thermal-footer { text-align: center; font-size: 20px; }

.helper-text { color: var(--cg-muted); font-size: 0.85rem; }

/* Scrollbars */
.content::-webkit-scrollbar { width: 10px; }
.content::-webkit-scrollbar-thumb { background: var(--cg-blue); border-radius: 999px; }
.content::-webkit-scrollbar-track { background: rgba(255,255,255,0.0); }

/* PRINT mant√©m a regra original, s√≥ n√£o muda mec√¢nica */
@media print {
  body { background: #fff; }
  .sidebar, .door-form, .door-preview, .section-card, .btn { display: none !important; }
  .print-area.active, .thermal-area.active { display: block; }
  .content { padding: 0; box-shadow: none; border: none; background: #fff; }
  .op-page { page-break-after: always; }
  .thermal-label { page-break-after: always; border: none; }
  #printResumo svg { display: none !important; }
}

/* Responsivo */
@media (max-width: 1024px) {
  .app { grid-template-columns: 1fr; }
  .sidebar {
    position: relative;
    top: 0;
    height: auto;
    flex-direction: row;
    flex-wrap: wrap;
    align-items: center;
    justify-content: space-between;
  }
  .sidebar button { text-align: center; flex: 1; }
  .door-layout { grid-template-columns: 1fr; }
}

/* Anima√ß√µes */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes floatIn {
  from { opacity: 0; transform: translateY(14px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes cardIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>

<link id="tema-css" rel="stylesheet" href="">
<script src="/static/main.js" defer></script>
<script src="/static/api.js" defer></script>
<script src="/static/pricing.js" defer></script>
<script src="/static/ui.js" defer></script>
<script src="/static/print.js" defer></script>
<script src="/static/estruturas3d.js" defer></script>
<script>
window.addEventListener("DOMContentLoaded", () => {
  if (!window.TIPOLOGIAS) return;
  const camposRemovidos = new Set(["dobradicas", "dobradicas_alturas", "altura_puxador"]);
  Object.keys(TIPOLOGIAS).forEach((tipo) => {
    const campos = TIPOLOGIAS[tipo] || [];
    if (tipo === "deslizante" || tipo === "correr") {
      TIPOLOGIAS[tipo] = campos.filter((campo) => !camposRemovidos.has(campo));
      if (!TIPOLOGIAS[tipo].includes("sistema_correr")) {
        TIPOLOGIAS[tipo].push("sistema_correr");
      }
    } else {
      TIPOLOGIAS[tipo] = campos.filter((campo) => !camposRemovidos.has(campo));
    }
  });

  let sistemasCorrer = [];

  const normalizarTexto = (valor) => String(valor || "").trim().toLowerCase();

  const possuiTagSistemaCorrer = (insumo) => {
    const tagsArray = Array.isArray(insumo.tags)
      ? insumo.tags
      : String(insumo.tags || "")
          .split(",")
          .map((tag) => tag.trim())
          .filter(Boolean);
    const tagsExtras = [insumo.tag, insumo.categoria, insumo.tipo].filter(Boolean);
    return [...tagsArray, ...tagsExtras]
      .map(normalizarTexto)
      .includes("sistemas de correr");
  };

  const carregarSistemasCorrer = async () => {
    try {
      const res = await fetch("https://colorglass.onrender.com/api/materiais");
      const data = await res.json();
      sistemasCorrer = Array.isArray(data)
        ? data.filter((insumo) => possuiTagSistemaCorrer(insumo))
        : [];
    } catch (error) {
      console.error("Erro ao carregar sistemas de correr:", error);
      sistemasCorrer = [];
    }
  };

  const renderSistemaCorrer = () => {
    const tipo = document.getElementById("tipologia")?.value;
    if (tipo !== "deslizante" && tipo !== "correr") return;

    const camposContainer = document.getElementById("campos");
    if (!camposContainer) return;

    let wrapper = document.getElementById("sistema_correr_wrapper");
    if (!wrapper) {
      wrapper = document.createElement("label");
      wrapper.id = "sistema_correr_wrapper";
      wrapper.innerHTML = `Sistema de correr<select id="sistema_correr"></select>`;
      camposContainer.appendChild(wrapper);
    }

    const select = wrapper.querySelector("select");
    if (!select) return;
    const valorAtual = select.value;
    select.innerHTML = "<option value=\"\">Selecione</option>";
    sistemasCorrer.forEach((insumo) => {
      const nome = insumo.nome || insumo.descricao || `Insumo ${insumo.id || ""}`.trim();
      const value = insumo.id != null ? String(insumo.id) : nome;
      const option = document.createElement("option");
      option.value = value;
      option.textContent = nome;
      select.appendChild(option);
    });
    if (valorAtual) {
      select.value = valorAtual;
    }
  };

  const removerCamposTecnicos = () => {
    const ids = ["dobradicas", "dobradicasContainer", "altura_puxador"];
    ids.forEach((id) => {
      const el = document.getElementById(id);
      if (!el) return;
      const label = el.closest("label");
      if (label) {
        label.remove();
      } else {
        el.remove();
      }
    });
  };

  if (typeof window.renderCampos === "function") {
    const originalRenderCampos = window.renderCampos;
    window.renderCampos = function (...args) {
      const resultado = originalRenderCampos.apply(this, args);
      removerCamposTecnicos();
      renderSistemaCorrer();
      return resultado;
    };
  }

  const garantirCamposTecnicosParaSalvar = () => {
    const tipo = document.getElementById("tipologia")?.value || "";
    const altura = parseFloat(document.getElementById("altura")?.value || "0");
    let dobradicas = document.getElementById("dobradicas");
    if (!dobradicas) {
      dobradicas = document.createElement("input");
      dobradicas.type = "hidden";
      dobradicas.id = "dobradicas";
      document.body.appendChild(dobradicas);
    }

    let container = document.getElementById("dobradicasContainer");
    if (!container) {
      container = document.createElement("div");
      container.id = "dobradicasContainer";
      container.style.display = "none";
      document.body.appendChild(container);
    }

    container.innerHTML = "";
    if (tipo === "giro") {
      dobradicas.value = "2";
      const alturaBase = altura > 0 ? altura : 2000;
      const alturas = [Math.round(alturaBase * 0.2), Math.round(alturaBase * 0.8)];
      alturas.forEach((valor) => {
        const input = document.createElement("input");
        input.type = "hidden";
        input.className = "dobradica-altura";
        input.value = String(valor);
        container.appendChild(input);
      });
    } else {
      dobradicas.value = "0";
    }
  };

  if (typeof window.salvarPorta === "function") {
    const originalSalvarPorta = window.salvarPorta;
    window.salvarPorta = function (...args) {
      garantirCamposTecnicosParaSalvar();
      return originalSalvarPorta.apply(this, args);
    };
  }

  carregarSistemasCorrer().finally(() => {
    removerCamposTecnicos();
    renderSistemaCorrer();
  });
});
</script>
</head>

<body>
<div class="app">
    <div class="sidebar">
        <h3>ColorGlass</h3>
        <button onclick="go('index_loja.html')">Voltar</button>
    </div>

    <div class="content">
        <h1>Or√ßamento de Portas</h1>

        <div id="infoOrcamento"></div>

        <div class="door-layout">
            <div class="door-form">
                <label>Tipologia
                    <select id="tipologia" onchange="renderCampos()">
                        <option value="">Selecione</option>
                        <option value="giro">Giro</option>
                        <option value="deslizante">Deslizante</option>
                        <option value="correr">Correr</option>
                        <option value="pivotante">Pivotante</option>
                    </select>
                </label>

                <button class="btn" onclick="abrirEstrutura3D()">
                    üß± Or√ßar Estrutura 3D
                </button>

                <label>Quantidade
                    <input type="number" id="quantidade" value="1" min="1" data-required="true" onchange="atualizarPrecoPorta(); atualizarCamposObrigatorios()">
                </label>

                <div id="campos"></div>
                <div class="price-preview" id="precoPorta">Pre√ßo estimado: R$ 0,00</div>
                <label class="cost-toggle">
                    <input type="checkbox" id="toggleCustos" onchange="toggleDetalhesCustos()">
                    Mostrar custos e pre√ßos detalhados
                </label>
                <div class="cost-details" id="detalhesCustos" style="display: none;"></div>
                <button class="btn" onclick="salvarPorta()">Salvar Porta</button>
            </div>

            <div class="door-preview">
                <svg id="portaSVG"></svg>
            </div>
        </div>

        <div class="section-card">
            <h2>Portas Salvas</h2>
            <div id="portasSalvas"></div>
            <div style="display:flex; gap:10px; flex-wrap: wrap;">
                <button class="btn" onclick="imprimirOrcamento()">Imprimir Or√ßamento</button>
                <button class="btn" onclick="imprimirOrdemProducao()">Imprimir Ordem de Produ√ß√£o</button>
                <button class="btn" onclick="imprimirEtiquetaTermica()">Etiqueta t√©rmica</button>
                <button class="btn" id="btnPortasTecnico">Portas t√©cnico</button>
            </div>
        </div>

        <div class="section-card">
            <h2>Estruturas 3D Salvas</h2>
            <div id="estruturas3DSalvas"></div>
        </div>

        <div id="printResumo" class="print-area"></div>
        <div id="printOrdem" class="print-area"></div>
        <div id="printEtiqueta" class="thermal-area"></div>
    </div>
</div>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    const botao = document.getElementById("btnPortasTecnico");
    if (!botao) return;
    botao.addEventListener("click", () => {
      const params = new URLSearchParams(window.location.search);
      const uuid = window.ORCAMENTO_UUID || params.get("orcamento_uuid");
      const destino = uuid
        ? `tecnico.html?orcamento_uuid=${encodeURIComponent(uuid)}`
        : "tecnico.html";
      window.location.href = destino;
    });
  });
</script>
</body>
</html>


